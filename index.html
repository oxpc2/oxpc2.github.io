<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ethio App Store</title>
  <meta name="description" content="Discover and download Amharic and Afar Islamic apps including Quran, Hadith, Fiqh, and educational tools.">
  <meta name="keywords" content="Quran, Hadith, Afar, Amharic, Islamic Apps, Ethio, Tefsir, Education, Fiqh">
  <meta name="author" content="Ethio App Store">
  <meta name="theme-color" content="#1E3A8A">
  <link rel="icon" href="icons/logo.png" type="image/png">
  <link rel="apple-touch-icon" href="icons/logo.png">

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <style>
    /* Dropdown visibility for desktop */
    @media (min-width: 768px) {
      .dropdown-menu {
        display: none;
        opacity: 0;
        transform: translateY(10px);
        transition: all 0.25s ease;
        position: absolute;
        left: 0;
        top: 100%;
      }
      .dropdown:hover .dropdown-menu {
        display: block;
        opacity: 1;
        transform: translateY(0);
      }
      .dropdown li {
        position: relative;
      }
      .dropdown-submenu {
        display: none;
        position: absolute;
        left: 100%;
        top: 0;
        background: white;
        border: 1px solid #ddd;
        border-radius: 0.25rem;
        min-width: 200px;
        z-index: 20;
        margin: 0;
      }
      .dropdown-menu li:hover > .dropdown-submenu {
        display: block;
      }
    }

    /* Mobile submenu hidden by default */
    @media (max-width: 767px) {
      .dropdown-submenu {
        display: none;
        background: white;
        border: 1px solid #ddd;
        border-radius: 0.25rem;
        margin-top: 4px;
        padding-left: 8px;
      }
      .submenu-open > .dropdown-submenu {
        display: block;
      }
    }

    .badge {
      font-size: 0.7rem;
      padding: 2px 6px;
      border-radius: 4px;
      font-weight: 600;
    }
    .badge-updated { background-color: #3b82f6; color: white; }
    body.dark-mode { background-color: #1a202c; color: #e2e8f0; }
    body.dark-mode .bg-white { background-color: #2d3748 !important; }
    body.dark-mode .text-gray-700 { color: #e2e8f0 !important; }
    body.dark-mode .text-gray-800 { color: #f1f5f9 !important; }
    body.dark-mode .border { border-color: #4a5568 !important; }
    .pagination-btn {
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      background-color: #fff;
      color: #374151;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .pagination-btn:hover {
      background-color: #3b82f6;
      color: white;
      border-color: #3b82f6;
    }
    .pagination-btn.active {
      background-color: #3b82f6;
      color: white;
      border-color: #3b82f6;
    }
    .pagination-btn:disabled {
      background-color: #f3f4f6;
      color: #9ca3af;
      cursor: not-allowed;
      border-color: #e5e7eb;
    }
    body.dark-mode .pagination-btn {
      background-color: #2d3748;
      color: #e2e8f0;
      border-color: #4a5568;
    }
    body.dark-mode .pagination-btn:hover {
      background-color: #3b82f6;
      color: white;
      border-color: #3b82f6;
    }
    body.dark-mode .pagination-btn.active {
      background-color: #3b82f6;
      color: white;
      border-color: #3b82f6;
    }
    body.dark-mode .pagination-btn:disabled {
      background-color: #4a5568;
      color: #6b7280;
      border-color: #6b7280;
    }
    .pagination-ellipsis {
      padding: 8px 12px;
      color: #374151;
    }
    body.dark-mode .pagination-ellipsis {
      color: #e2e8f0;
    }
  </style>
</head>

<body class="bg-gray-100 text-gray-800 transition-colors duration-300">
  <!-- Header -->
  <header class="bg-white shadow sticky top-0 z-50">
    <nav class="container mx-auto px-4 py-4 flex items-center justify-between">
      <a href="#" class="text-2xl font-bold text-gray-800">Ethio App Store</a>
      <div class="hidden md:flex space-x-6 items-center">
        <a href="#" data-category="all" class="active-filter text-gray-700 hover:text-blue-500">Home</a>
        <div class="dropdown relative">
          <button class="dropdown-toggle text-gray-700 hover:text-blue-500 flex items-center gap-1">
            App Categories <i class="fas fa-chevron-down text-sm"></i>
          </button>
          <ul class="dropdown-menu bg-white border rounded shadow w-48 z-10" id="category-dropdown-menu"></ul>
        </div>
        <div class="relative">
          <input type="text" id="searchInput" class="border rounded pl-10 pr-4 py-1 focus:outline-none focus:ring" placeholder="Search...">
          <i class="fas fa-search absolute left-3 top-2.5 text-gray-500"></i>
        </div>
        <button id="toggleDark" class="ml-4 text-gray-700 hover:text-yellow-400"><i class="fas fa-moon"></i></button>
      </div>
      <button id="menuToggle" class="md:hidden text-gray-700"><i class="fas fa-bars text-2xl"></i></button>
    </nav>

    <!-- Mobile Menu -->
    <div id="mobileMenu" class="md:hidden hidden px-4 pb-4 space-y-2">
      <a href="#" data-category="all" class="block text-gray-700 hover:text-blue-500">Home</a>
      <div>
        <p class="text-gray-700 font-semibold mb-1">App Categories</p>
        <ul id="category-dropdown-menu-mobile" class="ml-2 space-y-1"></ul>
      </div>
      <div class="relative">
        <input type="text" id="searchInputMobile" class="border rounded pl-10 pr-4 py-1 w-full focus:outline-none focus:ring" placeholder="Search...">
        <i class="fas fa-search absolute left-6 top-2.5 text-gray-500"></i>
      </div>
    </div>
  </header>

  <!-- Main -->
  <main class="container mx-auto px-4 py-8">
    <div id="loading" class="text-center py-20 hidden">
      <i class="fas fa-spinner fa-spin text-3xl text-blue-500"></i>
      <p>Loading apps...</p>
    </div>
    <div id="appsContainer" class="grid gap-6 grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"></div>
    <div id="noResults" class="text-center text-gray-600 mt-8 hidden">No apps found.</div>
    <div id="pagination" class="flex justify-center mt-8 space-x-1"></div>
  </main>

  <!-- Footer -->
  <footer class="bg-white shadow mt-10">
    <div class="container mx-auto px-4 py-6 text-center">
      &copy; <span id="year"></span> Ethio App Store. All rights reserved.
    </div>
  </footer>

  <script>
    /* Apps data shortened for example */
    const apps = [
      {
        "icon": "icons/sadikandsani.webp",
        "rating": "★★★★☆",
        "title": "Amharic Quran Tefsir",
        "description": "Haji Sani Habib Amharic Quran Tefsir App, best for word search index.",
        "category": "Tools",
        "version": "1.1.0",
        "updated": "June 5, 2025",
        "downloadLink": "apks/HajiSani-Quran-AppV1.apk"
      },
      {
        "icon": "icons/Nejashi Keyboard.webp",
        "rating": "★★★★☆",
        "title": "Nejashi Keyboard",
        "description": "A powerful Amharic keyboard with advanced features for easy typing. Includes word prediction and customizable themes.",
        "category": "Tools",
        "version": "1.2.0",
        "updated": "Apr 15, 2025",
        "downloadLink": "apks/Nejashi Keyboard.apk"
      },
      {
        "icon": "icons/إعراب الآجرومية ኢዕራብ ajrum.webp",
        "rating": "★★★★★",
        "title": "إعراب الآجرومية ኢዕራብ ajrum",
        "description": "Learn Arabic grammar (Nahw) with this interactive app focusing on the I'rab of Al-Ajurrumiyyah متن الآجرومية.",
        "category": "Education",
        "version": "2.0.1",
        "updated": "Mar 28, 2025",
        "downloadLink": "apks/إعراب الآجرومية ኢዕራብ ajrum.apk"
      },
      {
        "icon": "icons/አጅሩምያ ኪታብ በአማረኛ.webp",
        "rating": "★★★★☆",
        "title": "አጅሩምያ ኪታብ በአማረኛ",
        "description": "The classic Arabic grammar text Al-Ajurrumiyyah explained in Amharic (በአማረኛ). Essential for students of Arabic.",
        "category": "Education",
        "version": "1.5.0",
        "updated": "Apr 02, 2025",
        "downloadLink": "apks/አጅሩምያ ኪታብ በአማረኛ.apk"
      },
      {
        "icon": "icons/Arbaqiin Cadiis Qafár Afa.webp",
        "rating": "★★★★★",
        "title": "Arbaqiin Cadiis Qafár Afa",
        "description": "Imam Nawawi's Forty Hadith (الأربعون النووية) translated into the Afar language (Qafár Afa). Fundamental texts for Muslims.",
        "category": "Books & Reference",
        "version": "1.0.0",
        "updated": "Feb 10, 2025",
        "downloadLink": "apks/Arbaqiin Cadiis Qafár Afa.apk"
      },
      {
        "icon": "icons/إعراب القرآن جزء عم.webp",
        "rating": "★★★★★",
        "title": "إعراب القرآن جزء عم",
        "description": "Detailed grammatical analysis (I'rab) of Juz' Amma (الجزء ٣٠) of the Holy Quran. Aids in deeper understanding.",
        "category": "Education",
        "version": "1.1.0",
        "updated": "Jan 22, 2025",
        "downloadLink": "apks/إعراب القرآن جزء عم.apk"
      },
      {
        "icon": "icons/التحفة السنية بشرح الآجرومية.webp",
        "rating": "★★★★★",
        "title": "التحفة السنية بشرح الآجرومية",
        "description": "A well-known explanation (Sharh) of Al-Ajurrumiyyah, \"Al-Tuhfah al-Saniyyah\" by Sh. Muhammad Muhyi al-Din Abd al-Hamid.",
        "category": "Education",
        "version": "1.3.0",
        "updated": "Apr 20, 2025",
        "downloadLink": "apks/التحفة السنية بشرح الآجرومية.apk"
      },
      {
        "icon": "icons/حصن المسلم Hisnul Muslim Arebi.webp",
        "rating": "★★★★★",
        "title": "حصن المسلم Hisnul Muslim Arebi",
        "description": "The famous collection of supplications and remembrances, \"Fortress of the Muslim\" (Hisnul Muslim - حصن المسلم), in Arabic.",
        "category": "Books & Reference",
        "version": "3.0.0",
        "updated": "Apr 01, 2025",
        "downloadLink": "apks/حصن المسلم Hisnul Muslim Arebi.apk"
      },
      {
        "icon": "icons/شرح تلخيص متن البناء.webp",
        "rating": "★★★★☆",
        "title": "شرح تلخيص متن البناء",
        "description": "Explanation (Sharh) of the concise Arabic morphology text \"Matn al-Binaa\" (متن البناء في علم التصريف).",
        "category": "Education",
        "version": "1.0.0",
        "updated": "Mar 10, 2025",
        "downloadLink": "apks/شرح تلخيص متن البناء.apk"
      },
      {
        "icon": "icons/Buluug al-Maraam Qafár Afa.webp",
        "rating": "★★★★★",
        "title": "Buluug al-Maraam Qafár Afa",
        "description": "Bulugh al-Maram (بلوغ المرام من أدلة الأحكام) by Ibn Hajar al-Asqalani, a collection of Hadith pertaining to jurisprudence, in Afar language.",
        "category": "Books & Reference",
        "version": "1.1.0",
        "updated": "Mar 18, 2025",
        "downloadLink": "apks/Buluug al-Maraam Qafár Afa.apk"
      },
      {
        "icon": "icons/Cisnul Muslim Qafár Afa.webp",
        "rating": "★★★★★",
        "title": "Cisnul Muslim Qafár Afa",
        "description": "Fortress of the Muslim (Hisnul Muslim - حصن المسلم) supplications translated into the Afar language (Qafár Afa).",
        "category": "Books & Reference",
        "version": "2.0.0",
        "updated": "Feb 25, 2025",
        "downloadLink": "apks/Cisnul Muslim Qafár Afa.apk"
      },
      {
        "icon": "icons/Qafár Afih Qhur'aan Tafsiir.webp",
        "rating": "★★★★★",
        "title": "Qafár Afih Qhur'aan Tafsiir",
        "description": "Tafsir (explanation) of the Holy Quran in the Afar language (Qafár Afa). Helping Afar speakers understand the Quran.",
        "category": "Books & Reference",
        "version": "1.0.0",
        "updated": "Jan 30, 2025",
        "downloadLink": "apks/Qafár Afih Qhur'aan Tafsiir.apk"
      },
      {
        "icon": "icons/Qunxa jaamiqk doorimte cadiswà.webp",
        "rating": "★★★★☆",
        "title": "Qunxa jaamiqk doorimte cadiswà",
        "description": "Selected Hadith from Jami' al-Ulum wa al-Hikam (جامع العلوم والحكم) in the Afar language.",
        "category": "Books & Reference",
        "version": "1.0.0",
        "updated": "Dec 11, 2024",
        "downloadLink": "apks/Qunxa jaamiqk doorimte cadiswà.apk"
      },
      {
        "icon": "icons/Sultan Alimirah Qafar Af Dic.webp",
        "rating": "★★★★☆",
        "title": "Sultan Alimirah Qafar Af Dic",
        "description": "An Afar language (Qafár Afa) dictionary, possibly related to the works or legacy of Sultan Alimirah Hanfare.",
        "category": "Books & Reference",
        "version": "1.0.0",
        "updated": "Nov 05, 2024",
        "downloadLink": "apks/Sultan Alimirah Qafar Af Dic.apk"
      },
      {
        "icon": "icons/شرح متن أبي شجاع.webp",
        "rating": "★★★★★",
        "title": "شرح متن أبي شجاع",
        "description": "Explanation (Sharh) of Matn Abi Shuja' (متن أبي شجاع), also known as Ghayat al-Ikhtisar, a foundational Shafi'i Fiqh text.",
        "category": "Education",
        "version": "1.2.0",
        "updated": "Apr 11, 2025",
        "downloadLink": "apks/شرح متن أبي شجاع.apk"
      },
      {
        "icon": "icons/شرح متن سفينة النجا.webp",
        "rating": "★★★★☆",
        "title": "شرح متن سفينة النجا",
        "description": "Explanation (Sharh) of Safinat al-Naja (سفينة النجاة فيما يجب على العبد لمولاه), another key text in Shafi'i Fiqh focusing on acts of worship.",
        "category": "Education",
        "version": "1.1.0",
        "updated": "Mar 05, 2025",
        "downloadLink": "apks/شرح متن سفينة النجا.apk"
      },
      {
        "icon": "icons/متن ملحة الإعراب.webp",
        "rating": "★★★★☆",
        "title": "متن ملحة الإعراب",
        "description": "The classical Arabic grammar poem \"Mulhat al-I'rab\" (ملحة الإعراب) by al-Hariri. Presented in an accessible format.",
        "category": "Education",
        "version": "1.0.0",
        "updated": "Feb 19, 2025",
        "downloadLink": "apks/متن ملحة الإعراب.apk"
      },
      {
        "icon": "icons/ከኡለሞች ንግግር من أقوال العلماء.webp",
        "rating": "★★★★★",
        "title": "ከኡለሞች ንግግር من أقوال العلماء",
        "description": "A collection of sayings and wisdom from Islamic scholars (Ulama), presented in Amharic and Arabic (من أقوال العلماء).",
        "category": "Books & Reference",
        "version": "1.4.0",
        "updated": "Apr 25, 2025",
        "downloadLink": "apks/ከኡለሞች ንግግር من أقوال العلماء.apk"
      },
      {
        "icon": "icons/Qafar Afih Qhur'aan Tafsiiri.webp",
        "rating": "★★★★★",
        "title": "Qafar Afih Qhur'aan Tafsiiri",
        "description": "An alternative version or source for the Tafsir of the Quran in the Afar language. Hosted on Google Drive.",
        "category": "Books & Reference",
        "version": "Drive Link",
        "updated": "Unknown",
        "downloadLink": "https://drive.google.com/uc?export=download&id=1WIcwnOp0UzwFANasky0Cm1M-nVcfobND"
      },
      {
        "icon": "icons/Qafàr Afak Yabti-Rakiibo.webp",
        "rating": "★★★★☆",
        "title": "Qafàr Afak Yabti-Rakiibo",
        "description": "Afar language application, possibly focusing on vocabulary or grammar (Yabti-Rakiibo might relate to words/sentences). Hosted on Google Drive.",
        "category": "Education",
        "version": "Drive Link",
        "updated": "Unknown",
        "downloadLink": "https://drive.google.com/uc?export=download&id=1xyJqEuZ5AFfpRQXLovuw230ArTJIWdt2"
      },
      {
        "icon": "icons/عمدة السالك وعدة الناسك.webp",
        "rating": "★★★★★",
        "title": "عمدة السالك وعدة الناسك",
        "description": "\"Umdat al-Salik wa Uddat al-Nasik\" by Ibn Naqib al-Misri, a comprehensive manual of Shafi'i jurisprudence. Hosted on Google Drive.",
        "category": "Books & Reference",
        "version": "Drive Link",
        "updated": "Unknown",
        "downloadLink": "https://drive.google.com/uc?export=download&id=13FtobmNMI6XLuZxHglLasvkGcv-MSRFg"
      },
      {
        "icon": "icons/مَتْنُ الْآجُرُّومِيَّةِ.webp",
        "rating": "★★★★☆",
        "title": "مَتْنُ الْآجُرُّومِيَّةِ",
        "description": "The core text (Matn) of Al-Ajurrumiyyah (متن الآجرومية) in Arabic grammar. Hosted on Google Drive.",
        "category": "Education",
        "version": "Drive Link",
        "updated": "Unknown",
        "downloadLink": "https://drive.google.com/uc?export=download&id=1naS8_A4xXcODvhsH4-6N8RvJ-YttjqNj"
      },
      {
        "icon": "icons/ICCM and IMNCI 2021 Ethiopia.webp",
        "rating": "★★★★☆",
        "title": "ICCM and IMNCI 2021 Ethiopia",
        "description": "Ethiopian guidelines (2021) for Integrated Community Case Management (ICCM) and Integrated Management of Newborn and Childhood Illness (IMNCI).",
        "category": "Health & Fitness",
        "version": "2021 Ed.",
        "updated": "Circa 2021",
        "downloadLink": "https://drive.google.com/uc?export=download&id=1ycARvmBEE0U5YUjN62m3_2bhvryzIRC5"
      },
      {
        "icon": "icons/MAM&SAMEthiopia.webp",
        "rating": "★★★★☆",
        "title": "MAM & SAM Ethiopia",
        "description": "Ethiopian protocols or guidelines for the Management of Moderate Acute Malnutrition (MAM) and Severe Acute Malnutrition (SAM).",
        "category": "Health & Fitness",
        "version": "Guideline",
        "updated": "Unknown",
        "downloadLink": "https://drive.google.com/uc?export=download&id=1JBK9dEdh9xTPJ4JdPgbNo9kCHacturX6"
      }
    ];

    const appsContainer = document.getElementById("appsContainer");
    const searchInput = document.getElementById("searchInput");
    const searchInputMobile = document.getElementById("searchInputMobile");
    const categoryMenus = document.querySelectorAll("#category-dropdown-menu, #category-dropdown-menu-mobile");
    const toggleDark = document.getElementById("toggleDark");
    const noResults = document.getElementById("noResults");
    const loading = document.getElementById("loading");
    const pagination = document.getElementById("pagination");

    const itemsPerPage = 8;
    let currentPage = 1;
    let filteredApps = apps;
    let selectedCategory = "all";

    function renderCategoryMenu() {
      const categories = [...new Set(apps.map(app => app.category))].sort();
      categoryMenus.forEach(menu => {
        menu.innerHTML = "";
        const allLi = document.createElement("li");
        allLi.innerHTML = `<a href="#" data-category="all" class="block px-4 py-2 hover:bg-blue-100 font-bold text-blue-500">All Categories</a>`;
        menu.appendChild(allLi);

        categories.forEach(cat => {
          const li = document.createElement("li");
          li.innerHTML = `<a href="#" data-category="${cat}" class="block px-4 py-2 hover:bg-blue-100">${cat}</a>`;

          const subMenu = document.createElement("ul");
          subMenu.className = "dropdown-submenu";
          apps.filter(app => app.category === cat).forEach(app => {
            const subLi = document.createElement("li");
            subLi.innerHTML = `<a href="#" class="block px-4 py-2 hover:bg-blue-100 text-sm">${app.title}</a>`;
            subMenu.appendChild(subLi);
          });

          li.appendChild(subMenu);

          if (menu.id.includes("mobile")) {
            li.querySelector("a").addEventListener("click", (e) => {
              e.preventDefault();
              if (window.innerWidth < 768) {
                li.classList.toggle("submenu-open");
              } else {
                selectedCategory = e.target.dataset.category;
                updateFilter();
              }
            });
          }

          menu.appendChild(li);
        });
      });
    }

    function renderApps() {
      const start = (currentPage - 1) * itemsPerPage;
      const pageApps = filteredApps.slice(start, start + itemsPerPage);
      appsContainer.innerHTML = "";
      noResults.classList.toggle("hidden", pageApps.length > 0);

      pageApps.forEach(app => {
        const isNew = new Date(app.updated) > new Date(Date.now() - 30 * 86400000);
        const card = document.createElement("div");
        card.className = "bg-white p-4 rounded shadow hover:shadow-lg transform hover:-translate-y-1 transition";
        card.innerHTML = `
          <img src="${app.icon}" alt="${app.title}" class="w-16 h-16 object-cover rounded mb-2">
          <div class="flex justify-between items-center">
            <h2 class="text-lg font-semibold">${app.title}</h2>
            ${isNew ? `<span class="badge badge-updated">Updated</span>` : ""}
          </div>
          <p class="text-sm text-gray-500">${app.rating}</p>
          <p class="text-sm my-2">${app.description}</p>
          <p class="text-xs text-gray-400">Category: ${app.category}</p>
          <p class="text-xs text-gray-400">Version: ${app.version} | Updated: ${app.updated}</p>
          <a href="${app.downloadLink}" download class="mt-2 inline-block text-blue-600 hover:underline">Download</a>
        `;
        appsContainer.appendChild(card);
      });

      renderPagination();
    }

    function renderPagination() {
      const totalPages = Math.ceil(filteredApps.length / itemsPerPage);
      pagination.innerHTML = "";

      // Previous button
      const prevBtn = document.createElement("button");
      prevBtn.className = "pagination-btn";
      prevBtn.textContent = "« Prev";
      prevBtn.disabled = currentPage === 1;
      prevBtn.addEventListener("click", () => {
        if (currentPage > 1) {
          currentPage--;
          renderApps();
        }
      });
      pagination.appendChild(prevBtn);

      // Page numbers with ellipsis
      const maxVisiblePages = 5;
      let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
      let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);

      if (endPage - startPage + 1 < maxVisiblePages) {
        startPage = Math.max(1, endPage - maxVisiblePages + 1);
      }

      if (startPage > 1) {
        const firstPage = document.createElement("button");
        firstPage.className = "pagination-btn";
        firstPage.textContent = "1";
        firstPage.addEventListener("click", () => {
          currentPage = 1;
          renderApps();
        });
        pagination.appendChild(firstPage);

        if (startPage > 2) {
          const ellipsis = document.createElement("span");
          ellipsis.className = "pagination-ellipsis";
          ellipsis.textContent = "...";
          pagination.appendChild(ellipsis);
        }
      }

      for (let i = startPage; i <= endPage; i++) {
        const pageBtn = document.createElement("button");
        pageBtn.className = `pagination-btn ${i === currentPage ? "active" : ""}`;
        pageBtn.textContent = i;
        pageBtn.addEventListener("click", () => {
          currentPage = i;
          renderApps();
        });
        pagination.appendChild(pageBtn);
      }

      if (endPage < totalPages) {
        if (endPage < totalPages - 1) {
          const ellipsis = document.createElement("span");
          ellipsis.className = "pagination-ellipsis";
          ellipsis.textContent = "...";
          pagination.appendChild(ellipsis);
        }

        const lastPage = document.createElement("button");
        lastPage.className = "pagination-btn";
        lastPage.textContent = totalPages;
        lastPage.addEventListener("click", () => {
          currentPage = totalPages;
          renderApps();
        });
        pagination.appendChild(lastPage);
      }

      // Next button
      const nextBtn = document.createElement("button");
      nextBtn.className = "pagination-btn";
      nextBtn.textContent = "Next »";
      nextBtn.disabled = currentPage === totalPages;
      nextBtn.addEventListener("click", () => {
        if (currentPage < totalPages) {
          currentPage++;
          renderApps();
        }
      });
      pagination.appendChild(nextBtn);
    }

    function updateFilter() {
      const searchValue = (searchInput.value || searchInputMobile.value).toLowerCase();
      filteredApps = apps.filter(app =>
        (app.title.toLowerCase().includes(searchValue) || app.description.toLowerCase().includes(searchValue)) &&
        (selectedCategory === "all" || app.category === selectedCategory)
      );
      currentPage = 1;
      renderApps();
    }

    categoryMenus.forEach(menu => menu.addEventListener("click", e => {
      if (!menu.id.includes("mobile")) {
        e.preventDefault();
        if (e.target.dataset.category) {
          selectedCategory = e.target.dataset.category;
          updateFilter();
        }
      }
    }));

    searchInput.addEventListener("input", updateFilter);
    searchInputMobile.addEventListener("input", updateFilter);
    document.getElementById('menuToggle').addEventListener('click', () => document.getElementById('mobileMenu').classList.toggle('hidden'));

    toggleDark.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      localStorage.setItem("darkMode", document.body.classList.contains("dark-mode"));
    });
    if (localStorage.getItem("darkMode") === "true") document.body.classList.add("dark-mode");

    document.getElementById("year").textContent = new Date().getFullYear();
    loading.classList.remove("hidden");
    setTimeout(() => { renderCategoryMenu(); renderApps(); loading.classList.add("hidden"); }, 500);
  </script>
</body>
</html>
